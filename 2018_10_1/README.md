# Weekly ARTS

- `std::any`
- 安利`JSON for Modern C++`
- 我对坚持ARTS的看法

## Algorithm [413. Arithmetic Slices](https://leetcode.com/problems/arithmetic-slices/description/)

题目要求给定数值序列,找出其中存在的等差数列,等差数列要求连续,且最少三个数。

### 解决思路

- 查找等差数列
- 根据等差数列元素个数计算其能够拆分成的等差数列

查找等差数列的方法是记录上一次的差值,和差值相同的次数,当差值发生变化后计算等差数列个数,然后进入下一次查找。

而等差数列的子数列计算方式为,假设数列长度为`n`,则总的个数为`1+2+3+...+(n-2)`.

### 实现

```C++
int numberOfArithmeticSlices(vector<int>& A) {
    if (A.size() < 3) return 0;
    auto last_d = A.at(1)-A.at(0);
    auto last_n = 1;
    auto result = 0;

    auto calc = [&]() {
        if (last_n >= 2) {
            auto n = (last_n - 1);
            result += (n + 1)*n / 2;
        }
    };

    for (auto i = 1ul; i < A.size() - 1; i++) {
        auto d = A.at(i + 1) - A.at(i);
        if (d != last_d) {
            calc();
            last_d = d;
            last_n = 1;
        }
        else
        {
            last_n++;
        }
    }
    calc();
    return result;
}
```

### 总结

这种实现方法思路较为清晰,但是可以看到编码实现时有很多小细节需要注意,譬如起始的`last_n`处理,循环完成后的处理;查看别人的实现相对要简单很多,但是看不出来比较清晰的思路。

## Review [std::any使用介绍](any.md)

Visual C++ Team针对C++17新词汇类型之`std::any`的介绍。

## Technique [JSON for Modern C++](json.md)

JSON for Modern C++ 刚刚release了3.3.0版,最近使用到了这个库,实在太好用了,忍不住要安利下.

## Share 我对坚持ARTS的看法

耗子哥的专栏更新结束了,看了纸质版的结束语,又听了音频版的,总有些话不吐不快。

耗子哥的读友会微信群有这样的要求:

> 你需要承诺，你可以每周完成一个ARTS：
>
>> 每周至少做一个 leetcode 的算法题、阅读并点评至少一篇英文技术文章、学习至少一个技术技巧、分享一篇有观点和思考的技术文章。（也就是 Algorithm、Review、Tip、Share 简称ARTS）你需要坚持至少一年。

依然记得当时看到这个要求时内心的忐忑:微博上看到有读者群的消息,一时心动,毕竟可以和耗子哥直接交流,但是想想这个每周的ARTS坚持比较困难,还是算了;过一两天,要周末了,就觉得怎么可能被这么点困难吓倒?这么好的机会敦促自己进步,不能退缩,“一时冲动”提交了申请。

我对ARTS的看法也随着时间发生了变化,之前主要是因为"自己对耗子哥做出的承诺",一直在坚持,人无信不立,即使耗子哥并没有多在乎(?),这毕竟是自己的承诺;坚持了三个月之后,在ARTS的压力下学到了很多,尤其是学到的算法,竟然对工作也起到了很多帮助,现在开始慢慢享受这个过程,对知识看到,学到,用到。

可能是个人的秉性,微信群里潜水几个月,看到群里的朋友在纠结ARTS,有几点忍不住想要谈谈:

- 为什么不做/不坚持ARTS

耗子哥苦口婆心地讲,看来也没起到很大的作用,群里四百多人,坚持着的应该不到1/10吧,不做的人有自己的"苦衷":不会做、没时间、觉得不适合自己。我对这些只有一个疑问,难道进群的时候没有看群要求吗?群主定了规则,难道不认同这个规则么?

- 为什么要补ARTS

有一些朋友时不时在微信群说自己有什么事情没有做ARTS,找时间补之类的,至今在#ARTS中还有人在补之前的ARTS,我当时说过一句不中听的话"几周都写不了一篇ARTS,还想着一周补几篇?",ARTS就是给自己做的,找到适合自己的节奏最重要,这不是工作任务。

- 为什么不参与

刚开始时大家都新鲜,微信群有了,Slack也有了,还有各种channel,连我也有种找到组织的感觉,建了个#cpp想要和大家探讨探讨,时至今日Slack差不多没人说话了,而群里是不是还在冒出各种xxxx打卡,每日leetcode之类的。大好的平台不利用,大家是真的不会学习了么?

耗子哥说过,学习是逆人性的,我认同这个观点,国庆7天假,随便玩耍玩耍就过去了,这个假期能有多少人坚持ARTS？
