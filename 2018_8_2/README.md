# Weekly ARTS

## Algorithm [201. Bitwise AND of Numbers Range](https://leetcode.com/problems/bitwise-and-of-numbers-range/description/)

### 问题描述

给定正整数范围`[m,n]`,返回在这个范围所有数的按位与结果

### 解决方案

如果使用直接的思路来解决,一定是循环执行按位与,实现如下：

```C++
int rangeBitwiseAnd(int m, int n) {
    int result = m;
    int tmp = m;
    while (tmp <= n) {
        result &= tmp;
        tmp++;
    }
    return result;
}
```

不用说肯定超时了,毕竟题目有很强的规律性,还有更为简单快速的解决办法。

给定的条件是正整数范围,那么从起始值到结束值一直是增加1,可以看到规律如下:

1. `001`
2. `010`
3. `011`
4. `100`
5. `101`

结束值与起始值之间的差值转换为二进制最高非0位后面的个各位肯定都在`0`和`1`之间翻转过,而按位与的特性是全部是`1`结果才是`1`,其它情况下结果都是`0`,因而计算出差值最高为1,与起始值按位与即可：

```C++
int rangeBitwiseAnd(int m, int n) {
    int r = n - m;
    int i = 0xffffffff;
    while (r > 0) {
        r = r >> 1;
        i = i << 1;
    }
    return m & i;
}
```

但是这个实现是错误的,因为差值可能刚好使得起始值进位了,譬如起始值为`0b11`,增加个`0b1`,则变成了`0b100`,上述代码得到的是`0b11 & 0b10`,要解决这个问题只需要将结束值也进行以下按位与即可：

```C++
int rangeBitwiseAnd(int m, int n) {
    int r = n - m;
    int i = 0xffffffff;
    while (r > 0) {
        r = r >> 1;
        i = i << 1;
    }
    return (m & i)&n;
}
```

## Reivew [C++20的Contracts](AboutContracts.md)

对C++20的`contract`标准提案的解读。

## Technique [C++ Detection Idiom](CppDetectionIdiom.md)

在C++中如何编译期判断类型是否有特定的成员函数和变量。

## Share 关于天朝日常踢皮球的一些想法

斥巨资买的房子交房了,收房时发现房子有些问题,提给了物业,然后物业说整改,之后拖了一个月完全没有整改的迹象;上上周我给物业的人下了“最后通牒”：如果上周末我没有看到整改效果,物业必须给我一个说法。

直到周日,我赶去小区,依然没有任何动静,就给物业打电话,我声称要到物业要说法,才说整改人员这就过去,之后又是等了一个多小时,才来了个物业的员工过来了解情况,说给领导打电话等等等等,拨通领导电话说明情况,我问其要整改时间和保证,当说到我要录音作为证据时立马电话就挂了,这个物业员工信誓旦旦说明天来整改,而我要给他工牌拍照时却非常敏感地将工牌收了起来,直言明天一定回来。

最终耗时一个多月,专门请假才推动问题开始处理,过程中都是各种解释,各种说要解决问题,不要情绪激动激化矛盾。

亲历了这次的事情,让我对天朝非常流行的这种办事模式有了切身的体会和更多的看法：

- “按闹分配”

抱着互相尊重、理解的态度,换来的就是置之不理,如果你发脾气了,要正面刚了,突然间就是你错了,你情绪激动了,“我们给你解决问题,你不要激化矛盾,要不要解决问题了”;如果不发一通脾气,或者采取一些强硬的措施,天知道什么时候能解决问题。

- 毫无责任感

本来是其工作职责,连个承诺都不敢做,却很懂得保护自己远离是非;

- 装可怜

最常用的模式就是找基层员工过来面对客户,让基层员工对客户诉苦,说自己自己如何辛苦,说了不算,希望客户理解;而需要负责的人永远不跟你正面应对,简直就是TMD领导的艺术。

更可怕的是你看不到改变的迹象,在你正常的工作生活中,可能会遭遇到太多的不正常。

最后,推荐一篇文章 [风险社会里，你我都是待收割的韭菜](https://mp.weixin.qq.com/s?__biz=MjM5ODIwNDIwMA==&mid=2652694697&idx=1&sn=853681961f06663ccb83695d7817a60d&chksm=bd260eee8a5187f80403be7d98d2e8a710aee659bc5f39940842ab8105ef04b0cc2b67db3418&mpshare=1&scene=1&srcid=0809cU2bMGO2arbnftElVXER#rd)

